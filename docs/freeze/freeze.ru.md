# «Заморозка» статических ресурсов (freeze)

Подробнее о том что такое «freeze», описание и преимущества использования данной технологии читайте в [статье на bem.info](http://bem.info/articles/borschik).

## .borschik config

Для начала нам нужен конфиг. Он размещается в файле `.borschik`.

Файл `.borschik`относится к собственной директории и ко всем вложенным директориям.
```js
{
    "freeze_paths": {
        "i/bg": "../../_", // result path is "_"
        "i/ico": "../_" // result path is "i/_"
    }
}
```

`freeze_paths` — этот ключ определяет какие файлы будут заморожены, и как преобразуются пути к файлам после заморозки.

Например, когда Borschik будет обрабатывать CSS-файл и найдет ссылки на картинки в папке`/i/bg`,
Borschik заморозит , изменит их путь на  `/_` (т.к. `/i/bg/../../_` будет '/_' ) и создаст копию картинки на этом пути.
Ключ объекта — указывает на директории, файлы в которой будут заморожены.
Значение ключа - это директория, в которой будут храниться замороженные файлы,относительно первоначальной.

Еще пример:
```js
{
    "freeze_paths": {
        "i/bg": "_" // result path is 'i/bg/_'
    }
}
```
Borschik заморозит файлы из директории `i/bg` в `i/bg/_`

**Важное замечание:**
* Borschik не замораживает все файлы в директориях, а только те, на которые есть ссылка в обрабатываемых файлах.
* Borschik создает копию первоначального файла в директории с замороженными файлами, имя файла задается как контрольная сумма (хеш) от содержимого файла.

## Склеивание данных (resource inlining)
Для склеивания данных есть следующий синтаксис: (`:encodeURIComponent:` and `:base64:`).

```json
{
    "freeze_paths": {
        "i/svg_images": ":encodeURIComponent:",
        "i/gif_images": ":base64:"
    }
}
```

С этим конфигом все ссылки на ресурсы `i/svg_images` или `i/gif_images` будут склеены. Borschik поддерживает только кодировку `base64` и `encodeURIComponent`. 

Например:
```css
.gif {
    background: url("i/gif_images/icon.gif");
}
.svg {
    background: url("i/svg_images/image.svg");
}
```

В результате получаем:
```css
.gif {
    background: url("data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==");
}
.svg {
    background: url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org.......");
}
```

Склеивание в JS-файлах через `borschik.link()` также поддерживается.
